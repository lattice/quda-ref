<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QUDA: quda::ShiftUpdate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QUDA
   &#160;<span id="projectnumber">v1.1.0</span>
   </div>
   <div id="projectbrief">A library for QCD on GPUs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacequda.html">quda</a></li><li class="navelem"><a class="el" href="classquda_1_1_shift_update.html">ShiftUpdate</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classquda_1_1_shift_update-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">quda::ShiftUpdate Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for quda::ShiftUpdate:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classquda_1_1_shift_update.png" usemap="#quda::ShiftUpdate_map" alt=""/>
  <map id="quda::ShiftUpdate_map" name="quda::ShiftUpdate_map">
<area href="classquda_1_1_worker.html" alt="quda::Worker" shape="rect" coords="0,0,109,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af5710639437b3bb584e8fee14d2fbfa3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_shift_update.html#af5710639437b3bb584e8fee14d2fbfa3">ShiftUpdate</a> (<a class="el" href="classquda_1_1_color_spinor_field.html">ColorSpinorField</a> *r, std::vector&lt; <a class="el" href="classquda_1_1_color_spinor_field.html">ColorSpinorField</a> * &gt; p, std::vector&lt; <a class="el" href="classquda_1_1_color_spinor_field.html">ColorSpinorField</a> * &gt; x, double *alpha, double *beta, double *zeta, double *zeta_old, int j_low, int n_shift)</td></tr>
<tr class="separator:af5710639437b3bb584e8fee14d2fbfa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d854c15e9c1886ed5d069ca4220d8b"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_shift_update.html#a66d854c15e9c1886ed5d069ca4220d8b">~ShiftUpdate</a> ()</td></tr>
<tr class="separator:a66d854c15e9c1886ed5d069ca4220d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50491e941f687883f8392c334763b20d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_shift_update.html#a50491e941f687883f8392c334763b20d">updateNshift</a> (int new_n_shift)</td></tr>
<tr class="separator:a50491e941f687883f8392c334763b20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97930f4632b7ff0416a395ed038f3226"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_shift_update.html#a97930f4632b7ff0416a395ed038f3226">updateNupdate</a> (int new_n_update)</td></tr>
<tr class="separator:a97930f4632b7ff0416a395ed038f3226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4f6b449d27ba4e0708db0f0edafccd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_shift_update.html#ad4f6b449d27ba4e0708db0f0edafccd1">apply</a> (const <a class="el" href="quda__api_8h.html#ad5f199368db7a9b3c339405c12ba1ff6">qudaStream_t</a> &amp;<a class="el" href="namespacequda.html#a8758993ef56590b4bd278fc233e7e2a6">stream</a>)</td></tr>
<tr class="separator:ad4f6b449d27ba4e0708db0f0edafccd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classquda_1_1_worker"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classquda_1_1_worker')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classquda_1_1_worker.html">quda::Worker</a></td></tr>
<tr class="memitem:ae3651e3dec83a8f2d7c0bdda8e67122a inherit pub_methods_classquda_1_1_worker"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_worker.html#ae3651e3dec83a8f2d7c0bdda8e67122a">Worker</a> ()</td></tr>
<tr class="separator:ae3651e3dec83a8f2d7c0bdda8e67122a inherit pub_methods_classquda_1_1_worker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bbae5f1794fef7eced6b1488a1231b inherit pub_methods_classquda_1_1_worker"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquda_1_1_worker.html#ae0bbae5f1794fef7eced6b1488a1231b">~Worker</a> ()</td></tr>
<tr class="separator:ae0bbae5f1794fef7eced6b1488a1231b inherit pub_methods_classquda_1_1_worker"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This worker class is used to update the shifted p and x vectors. These updates take place in the subsequent dslash application in the next iteration, while we're waiting on communication to complete. This results in improved strong scaling of the multi-shift solver.</p>
<p>Since the matrix-vector consists of multiple dslash applications, we partition the shifts between these successive dslash applications for optimal communications hiding.</p>
<p>In general, when using a <a class="el" href="classquda_1_1_worker.html">Worker</a> class to hide communication in the dslash, one must be aware whether auto-tuning on the dslash policy that envelops the dslash will occur. If so, then the <a class="el" href="classquda_1_1_worker.html">Worker</a> class instance will be called multiple times during this tuning, potentially rendering the results wrong. This isn't a problem in the multi-shift solve, since we are guaranteed to not run the worker class on the first iteration (when the dslash policy tuning will take place), but this is something that will need to be addressed in the future as the <a class="el" href="classquda_1_1_worker.html">Worker</a> idea to applied elsewhere. </p>

<p class="definition">Definition at line <a class="el" href="inv__multi__cg__quda_8cpp_source.html#l00049">49</a> of file <a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af5710639437b3bb584e8fee14d2fbfa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5710639437b3bb584e8fee14d2fbfa3">&#9670;&nbsp;</a></span>ShiftUpdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">quda::ShiftUpdate::ShiftUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classquda_1_1_color_spinor_field.html">ColorSpinorField</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classquda_1_1_color_spinor_field.html">ColorSpinorField</a> * &gt;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classquda_1_1_color_spinor_field.html">ColorSpinorField</a> * &gt;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>beta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>zeta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>zeta_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_shift</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="inv__multi__cg__quda_8cpp_source.html#l00072">72</a> of file <a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a>.</p>

</div>
</div>
<a id="a66d854c15e9c1886ed5d069ca4220d8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66d854c15e9c1886ed5d069ca4220d8b">&#9670;&nbsp;</a></span>~ShiftUpdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual quda::ShiftUpdate::~ShiftUpdate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="inv__multi__cg__quda_8cpp_source.html#l00078">78</a> of file <a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad4f6b449d27ba4e0708db0f0edafccd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4f6b449d27ba4e0708db0f0edafccd1">&#9670;&nbsp;</a></span>apply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void quda::ShiftUpdate::apply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="quda__api_8h.html#ad5f199368db7a9b3c339405c12ba1ff6">qudaStream_t</a> &amp;&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classquda_1_1_worker.html#aedc74596a6ef14c9c7591a62f440d54d">quda::Worker</a>.</p>

<p class="definition">Definition at line <a class="el" href="inv__multi__cg__quda_8cpp_source.html#l00085">85</a> of file <a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a>.</p>

</div>
</div>
<a id="a50491e941f687883f8392c334763b20d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50491e941f687883f8392c334763b20d">&#9670;&nbsp;</a></span>updateNshift()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void quda::ShiftUpdate::updateNshift </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_n_shift</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="inv__multi__cg__quda_8cpp_source.html#l00080">80</a> of file <a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a>.</p>

</div>
</div>
<a id="a97930f4632b7ff0416a395ed038f3226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97930f4632b7ff0416a395ed038f3226">&#9670;&nbsp;</a></span>updateNupdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void quda::ShiftUpdate::updateNupdate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_n_update</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="inv__multi__cg__quda_8cpp_source.html#l00081">81</a> of file <a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>quda/lib/<a class="el" href="inv__multi__cg__quda_8cpp_source.html">inv_multi_cg_quda.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 28 2021 16:10:29 for QUDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
